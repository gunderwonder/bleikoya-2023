{"version":3,"file":"core-scroll.jsx.js","sources":["../utils.js","core-scroll.js","../../node_modules/@nrk/custom-element-to-react/lib/custom-element-to-react.mjs","core-scroll.jsx"],"sourcesContent":["export const IS_BROWSER = typeof window !== 'undefined'\nconst HAS_NAVIGATOR = IS_BROWSER && typeof window.navigator !== 'undefined'\nexport const IS_ANDROID = HAS_NAVIGATOR && /(android)/i.test(navigator.userAgent) // Bad, but needed\nexport const IS_IOS = HAS_NAVIGATOR && /iPad|iPhone|iPod/.test(String(navigator.platform))\nexport const IS_IE11 = IS_BROWSER && window.msCrypto // msCrypto only exists in IE11\n\n// Mock HTMLElement for Node\nif (!IS_BROWSER && !global.HTMLElement) {\n  global.HTMLElement = class {}\n}\n\n/**\n* addEvent\n* @param {String} nodeName An unique ID of the event to bind - ensurnes single instance\n* @param {String} type The type of event to bind\n* @param {Function} handler The function to call on event\n* @param {Boolean|Object} options useCapture or options object for addEventListener. Defaults to false\n*/\nexport function addEvent (nodeName, type, handler, options = false, key) {\n  if (!IS_BROWSER || window[key = `event-${nodeName}-${type}`]) return // Ensure single instance\n  const node = (type === 'resize' || type === 'load') ? window : document\n  node.addEventListener(window[key] = type, (event) => (event.nodeName = nodeName) && handler(event), options)\n}\n\n/**\n* addStyle\n* @param {String} nodeName An unique ID of the event to bind - ensurnes single instance\n* @param {String} css The css to inject\n*/\nexport function addStyle (nodeName, css) {\n  const key = `style-${nodeName.toLowerCase()}`\n  const min = css.replace(/\\/\\*[^!][^*]*\\*\\//g, '').replace(/\\s*(^|[:;,{}]|$)\\s*/g, '$1')\n  document.getElementById(key) || document.head.insertAdjacentHTML('afterbegin', `<style id=\"${key}\">${min}</style>`)\n}\n\n/**\n* escapeHTML\n* @param {String} str A string with potential html tokens\n* @return {String} Escaped HTML string according to OWASP recommendation\n*/\nconst ESCAPE_MAP = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '/': '&#x2F;', '\\'': '&#x27;' }\nexport function escapeHTML (str) {\n  return String(str || '').replace(/[&<>\"'/]/g, (char) => ESCAPE_MAP[char])\n}\n\n/**\n* closest\n* @param {Element} element Element to traverse up from\n* @param {String} selector A selector to search for matching parents or element itself\n* @return {Element|null}  Element which is the closest ancestor matching selector\n*/\nexport const closest = (() => {\n  const proto = typeof window === 'undefined' ? {} : window.Element.prototype\n  const match = proto.matches || proto.msMatchesSelector || proto.webkitMatchesSelector\n  return proto.closest\n    ? (el, css) => el.closest(css)\n    : (el, css) => {\n      // IE jumps to shadow SVG DOM on clicking an SVG defined by <use>.\n      // If so, jump back to <use> element and traverse real DOM\n        if (el.correspondingUseElement) el = el.correspondingUseElement\n        for (;el; el = el.parentElement) if (match.call(el, css)) return el\n        return null\n      }\n})()\n\n/**\n* dispatchEvent - with infinite loop prevention\n* @param {Element} element The target object\n* @param {String} name The event name\n* @param {Object} detail Detail object (bubbles and cancelable is set to true)\n* @return {Boolean} Whether the event was canceled. Returns true if either event's cancelable attribute value is false or its preventDefault() method was not invoked, and false otherwise.\n*/\nexport function dispatchEvent (element, name, detail = {}) {\n  const ignore = `prevent_recursive_dispatch_maximum_callstack${name}`\n  let event\n\n  if (element[ignore]) return true // We are already processing this event, so skip sending a new one\n  else element[ignore] = true // Add name to dispatching ignore\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(name, { bubbles: true, cancelable: true, detail })\n  } else {\n    event = document.createEvent('CustomEvent')\n    event.initCustomEvent(name, true, true, detail)\n  }\n  // IE reports incorrect event.defaultPrevented\n  // but correct return value on element.dispatchEvent\n  const result = element.dispatchEvent(event)\n  element[ignore] = null // Remove name from dispatching ignore\n\n  return result // Follow W3C standard for return value\n}\n\n/**\n* getUUID\n* @return {String} A generated unique ID\n*/\nexport function getUUID () {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2, 5)\n}\n\n/**\n * throttle\n * @param {Function} callback  The new throttled function\n * @param {Number} ms The threshold of milliseconds between each callback\n */\nexport function throttle (callback, ms) {\n  let timer\n  return function (...args) {\n    if (!timer) {\n      timer = setTimeout(function () {\n        callback.apply(this, args)\n        timer = null\n      }, ms)\n    }\n  }\n}\n\n/**\n * toggleAttribute (Ponyfill for IE and Edge, fixes #299)\n * @link https://developer.mozilla.org/en-US/docs/Web/API/Element/toggleAttribute\n * @param {Element} el  Single DOM Element\n * @param {String} name The name of the attribute to be toggled\n * @param {Boolean} force Force attribute to be added or removed regardless of previous state\n */\nexport function toggleAttribute (el, name, force = !this.hasAttribute(name)) {\n  if (!force === el.hasAttribute(name)) el[force ? 'setAttribute' : 'removeAttribute'](name, '')\n  return force\n}\n\n/**\n* queryAll\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @param {Element} context Node to look for elements within\n* @return {Element[]} Array of elements\n*/\nexport function queryAll (elements, context = document) {\n  if (elements) {\n    if (elements.nodeType) return [elements]\n    if (typeof elements === 'string') return [].slice.call(context.querySelectorAll(elements))\n    if (elements.length) return [].slice.call(elements)\n  }\n  return []\n}\n","import { IS_BROWSER, addStyle, closest, dispatchEvent, throttle, getUUID, queryAll } from '../utils'\n\n/**\n * @typedef {{ x: number, y: number }} scrollCoords\n */\n\n/**\n * @typedef {object} scrollPoint\n * @property {Number} x\n * @property {Number} y\n * @property {'top' | 'bottom'} prop\n */\n\n/**\n * @typedef {'up'| 'down' | 'left' | 'right'} scrollDirection\n */\n\n/**\n * @typedef {Object} scrollStatus\n * @property {Number} up distance above to bounding element\n * @property {Number} right distance right to bounding element\n * @property {Number} down distance below to bounding element\n * @property {Number} left distance left to bounding element\n */\n\n/**\n * @typedef {scrollDirection | scrollPoint | Element} scrollTarget\n */\n\n/**\n * @typedef {Object} dragType\n * @property {String} animate Id of element to animate\n * @property {Number} diffSumX\n * @property {Number} diffSumY\n * @property {Number} diffX\n * @property {Number} diffY\n * @property {Number} pageX\n * @property {Number} pageY\n * @property {Number} scrollX\n * @property {Number} scrollY\n * @property {HTMLElement} target\n */\n\n/**\n * @type {dragType}\n */\nconst DRAG = {}\nconst MOVE = { up: { y: -1, prop: 'top' }, down: { y: 1, prop: 'bottom' }, left: { x: -1 }, right: { x: 1 } }\nconst MOVE_SIGNIFICANT = 10\nconst NEEDS_MOUSEDOWN = '[contenteditable=\"true\"],input,select,textarea'\nconst EVENT_PASSIVE = ((has = false) => {\n  try { window.addEventListener('test', null, { get passive () { has = { passive: true } } }) } catch (e) {}\n  return has\n})()\n\n// https://css-tricks.com/introduction-reduced-motion-media-query/\nconst requestJumps = IS_BROWSER && window.matchMedia && window.matchMedia('(prefers-reduced-motion)').matches\nconst requestFrame = IS_BROWSER && (window.requestAnimationFrame || window.setTimeout)\n\nexport default class CoreScroll extends HTMLElement {\n  connectedCallback () {\n    // Hide scrollbar in WebKit and default to display block\n    addStyle(this.nodeName, `\n      ${this.nodeName}{display:block}\n      ${this.nodeName}::-webkit-scrollbar{display:none}\n    `)\n\n    this.style.overflow = 'scroll' // Ensure visible scrollbars\n    this.style.webkitOverflowScrolling = 'touch' // Momentum scroll on iOS\n\n    // Calculate sizes for hiding, must be after setting overflow:scroll\n    const barWidth = this.offsetWidth - this.clientWidth\n    const barHeight = this.offsetHeight - this.clientHeight\n\n    // Also ensure height does not grow higher than parent element\n    this.style.marginRight = `-${barWidth}px`\n    this.style.marginBottom = `-${barHeight}px`\n    this.style.maxHeight = `calc(100% + ${barHeight}px)`\n    this._throttledEvent = throttle(this.handleEvent.bind(this), 500)\n\n    this.addEventListener('mousedown', this)\n    this.addEventListener('wheel', this, EVENT_PASSIVE)\n    this.addEventListener('scroll', this._throttledEvent, EVENT_PASSIVE)\n    window.addEventListener('resize', this._throttledEvent, EVENT_PASSIVE)\n    window.addEventListener('load', this) // Update state when we are sure all CSS is loaded\n    document.addEventListener('click', this)\n\n    // Observe children for changes and run this.handleEvent()\n    // - jsx in particular relies on onScrollChange triggering to update button states\n    if (!this._childListObserver && window.MutationObserver) this._childListObserver = new window.MutationObserver(onDOMchange.bind(this))\n    if (this._childListObserver) this._childListObserver.observe(this, { childList: true, subtree: true })\n\n    setTimeout(() => this.handleEvent()) // Initialize buttons after children is parsed\n  }\n\n  disconnectedCallback () {\n    if (this._childListObserver) this._childListObserver.disconnect()\n    this._childListObserver = this._throttledEvent = null // Garbage collection\n    this.removeEventListener('mousedown', this)\n    this.removeEventListener('wheel', this, EVENT_PASSIVE)\n    this.removeEventListener('scroll', this._throttledEvent, EVENT_PASSIVE)\n    window.removeEventListener('resize', this._throttledEvent, EVENT_PASSIVE)\n    window.removeEventListener('load', this)\n    document.removeEventListener('click', this)\n  }\n\n  /**\n   *\n   * @param {Event} event\n   */\n  handleEvent (event = {}) {\n    if (!this.parentNode || event.defaultPrevented) return // Abort if removed from DOM or event is prevented\n    if (event.type === 'wheel') DRAG.animate = false // Stop momentum animation onWheel\n    else if (event.type === 'mousedown') onMousedown.call(this, event)\n    else if (event.type === 'click') {\n      const btn = this.id && closest(event.target, `[for=\"${this.id}\"],[data-for=\"${this.id}\"]`)\n      if (btn && dispatchEvent(this, 'scroll.click', { move: btn.value })) this.scroll(btn.value)\n    } else {\n      const scrollStatus = getScrollStatus(this)\n      updateButtons(this, scrollStatus)\n      dispatchEvent(this, 'scroll.change')\n\n      const cursor = (scrollStatus.left || scrollStatus.right || scrollStatus.up || scrollStatus.down) ? 'grab' : ''\n      if (!event.type) { // Do not change cursor while dragging\n        this.style.cursor = `-webkit-${cursor}`\n        this.style.cursor = cursor\n      }\n    }\n  }\n\n  /**\n   * Scroll to Element, point or cardinal direction within core-scroll\n   * @param {scrollTarget} point Element, {x, y} pixel distance from top/left or cardinal direction ['up', 'down', 'left', 'right']\n   * @returns {Promise<scrollPoint>} scrollPoint\n   */\n  scroll (point) {\n    const endPoint = parsePoint(this, point)\n    const { x, y } = endPoint\n    const uuid = DRAG.animate = getUUID() // Giving the animation an ID to workaround IE timeout issues\n    const friction = this.friction\n    let moveX = requestJumps ? 1 : x - this.scrollLeft\n    let moveY = requestJumps ? 1 : y - this.scrollTop\n\n    return new Promise((resolve) => {\n      const move = () => {\n        if (DRAG.animate === uuid && (Math.round(moveX) || Math.round(moveY))) {\n          this.scrollLeft = x - Math.round(moveX *= friction)\n          this.scrollTop = y - Math.round(moveY *= friction)\n          requestFrame(move)\n        } else {\n          resolve(endPoint)\n        }\n      }\n      move()\n    })\n  }\n\n  get items () { return queryAll(this.getAttribute('items') || this.children, this) }\n\n  // Ensure falsy values becomes ''\n  set items (val) { this.setAttribute('items', val || '') }\n\n  // ScrollLeft can return decimals when browser is zoomed, leading to unwanted negative values\n  get scrollRight () { return Math.max(0, this.scrollWidth - this.clientWidth - this.scrollLeft) }\n\n  // Safeguard for negative due to decimals for scrollTop similar to scrollLeft above\n  get scrollBottom () { return Math.max(0, this.scrollHeight - this.clientHeight - this.scrollTop) }\n\n  // Avoid friction 1 (infinite)\n  get friction () { return Math.min(0.99, this.getAttribute('friction')) || 0.8 }\n\n  set friction (val) { this.setAttribute('friction', val) }\n}\n\nfunction onMousedown (event) {\n  if (closest(event.target, NEEDS_MOUSEDOWN)) return\n  if (event.button !== 0) return // Only react to left clicking\n  event.preventDefault() // Prevent text selection and enable nesting\n\n  DRAG.pageX = event.pageX\n  DRAG.pageY = event.pageY\n  DRAG.diffSumX = 0\n  DRAG.diffSumY = 0\n  DRAG.animate = DRAG.diffX = DRAG.diffY = 0 // Reset\n  DRAG.scrollX = this.scrollLeft\n  DRAG.scrollY = this.scrollTop\n  DRAG.target = this\n\n  document.body.style.cursor = this.style.cursor = '-webkit-grabbing'\n  document.body.style.cursor = this.style.cursor = 'grabbing'\n  document.addEventListener('mousemove', onMousemove)\n  document.addEventListener('mouseup', onMouseup)\n}\n\nfunction onMousemove (event) {\n  DRAG.diffX = DRAG.pageX - (DRAG.pageX = event.pageX)\n  DRAG.diffY = DRAG.pageY - (DRAG.pageY = event.pageY)\n  DRAG.diffSumX += DRAG.diffX\n  DRAG.diffSumY += DRAG.diffY\n  DRAG.target.scrollLeft = DRAG.scrollX += DRAG.diffX\n  DRAG.target.scrollTop = DRAG.scrollY += DRAG.diffY\n\n  // Prevent links when we know there has been significant movement\n  if (Math.max(Math.abs(DRAG.diffSumX), Math.abs(DRAG.diffSumY)) > MOVE_SIGNIFICANT) {\n    DRAG.target.style.pointerEvents = 'none'\n  }\n}\n\nfunction onMouseup (event) {\n  const momentum = Math.abs(DRAG.diffX || DRAG.diffY) > MOVE_SIGNIFICANT ? 20 : 0\n  document.removeEventListener('mousemove', onMousemove)\n  document.removeEventListener('mouseup', onMouseup)\n  document.body.style.cursor = ''\n\n  if (momentum) {\n    DRAG.target.scroll({\n      x: DRAG.scrollX + DRAG.diffX * momentum,\n      y: DRAG.scrollY + DRAG.diffY * momentum\n    })\n  }\n  DRAG.target.style.pointerEvents = '' // Allow events again\n  DRAG.target.style.cursor = '-webkit-grab'\n  DRAG.target.style.cursor = 'grab'\n  DRAG.target = null // Prevent memory leak\n}\n\n/**\n * Takes an element, coordinates or cardinal direction and returns x/y -coordinates\n * @param {CoreScroll} self CoreScroll HTMLElement\n * @param {scrollTarget} move\n * @returns {scrollPoint}\n */\nfunction parsePoint (self, move) {\n  const scrollItems = self.items\n  // Move is an element within CoreScroll\n  const toItem = move && move.nodeType && scrollItems.filter((item) => item.contains(move))[0]\n  if (toItem) {\n    // Target offset subtracting CoreScroll offset and half of offsetHeight/width to center\n    return {\n      x: Math.max(0, toItem.offsetLeft - self.offsetLeft - ((self.offsetWidth / 2) - (toItem.offsetWidth / 2))),\n      y: Math.max(0, toItem.offsetTop - self.offsetTop - ((self.offsetHeight / 2) - (toItem.offsetHeight / 2)))\n    }\n  } else if (move && move.nodeType && !toItem) {\n    console.warn(self, `cannot find child element ${move} as a valid target for scrolling`)\n  }\n  const point = typeof move === 'object' ? move : { move }\n  if (typeof point.x !== 'number') point.x = self.scrollLeft\n  if (typeof point.y !== 'number') point.y = self.scrollTop\n  if ((point.move = MOVE[point.move])) {\n    const axis = point.move.x ? 'x' : 'y'\n    const start = point.move.x ? 'left' : 'top'\n    const bounds = self.getBoundingClientRect()\n    const scroll = bounds[start] - self[point.move.x ? 'scrollLeft' : 'scrollTop']\n    const edge = bounds[start] + bounds[point.move.x ? 'width' : 'height'] * point.move[axis]\n\n    scrollItems.every((el) => { // Use .every as this loop stops on return false\n      const rect = el.getBoundingClientRect()\n      const marg = el.ownerDocument.defaultView.getComputedStyle(el)[`margin-${start}`]\n\n      point[axis] = rect[start] - parseInt(marg, 10) - scroll // Update point to child axis coordinate\n      return rect[point.move.prop || move] < edge\n    })\n  }\n  return {\n    x: Math.max(0, Math.min(point.x, self.scrollWidth - self.clientWidth)),\n    y: Math.max(0, Math.min(point.y, self.scrollHeight - self.clientHeight))\n  }\n}\n\n/**\n * scroll.DOMChange\n *\n * fired when MutationObserver in CoreScroll detects a change in child nodes\n *\n * @event scroll.DOMChange\n * @type {object}\n * @param {NodeList} addedNodes\n * @param {NodeList} removedNodes\n */\n\n/**\n * Handle DOM changes in childlist observed with MutationObserver in CoreScroll\n *\n * @this {CoreScroll} CoreScroll HTMLElement\n * @param {MutationRecord[]} mutationList\n * @fires scroll.DOMChange when a MutationRecord has type childList\n */\nfunction onDOMchange (mutationList) {\n  if (!this.parentNode) return // Abort if removed from DOM\n\n  for (const mutation of mutationList) {\n    /* One or more children have been added to and/or removed from the tree. */\n    if (mutation.type === 'childList') {\n      const scrollStatus = getScrollStatus(this)\n      updateButtons(this, scrollStatus)\n      dispatchEvent(this, 'scroll.change')\n    }\n  }\n}\n\n/**\n * getScrollStatus\n * We floor all values to handle potential decimal leftovers if browser is zoomed in or out\n * @param {CoreScroll} self CoreScroll HTMLElement\n * @returns {scrollStatus} Object with values for distance to bounding element in cardinal directions\n */\nfunction getScrollStatus (self) {\n  return {\n    up: Math.floor(self.scrollTop),\n    right: Math.floor(self.scrollRight),\n    down: Math.floor(self.scrollBottom),\n    left: Math.floor(self.scrollLeft)\n  }\n}\n\n/**\n * Updates disabled attribute on all connected buttons with value set as a scrollDirection\n * @param {CoreScroll} self CoreScroll HTMLElement\n * @param {scrollStatus} scrollStatus\n */\nfunction updateButtons (self, scrollStatus) {\n  queryAll(self.id && `[for=\"${self.id}\"],[data-for=\"${self.id}\"]`).forEach((el) => (el.disabled = !scrollStatus[el.value]))\n}\n","import React from 'react';\n\n/**\n* closest\n* @param {Element} el Element to traverse up from\n* @param {String} css A selector to search for matching parents or element itself\n* @return {Element|null}  Element which is the closest ancestor matching selector\n*/\nvar closest = (function () {\n  var proto = typeof window === 'undefined' ? {} : window.Element.prototype;\n  var match = proto.matches || proto.msMatchesSelector || proto.webkitMatchesSelector;\n  return proto.closest ? function (el, css) { return el.closest(css); } : function (el, css) {\n    for (;el; el = el.parentElement) { if (match.call(el, css)) { return el } }\n    return null\n  }\n})();\n\n/**\n* customElementToReact\n* @param {Class|Function} elementClass A custom element definition.\n* @param {Array} options Props and custom events\n* @return {Object} A React component\n*/\nfunction customElementToReact (elementClass, options) {\n  if ( options === void 0 ) options = {};\n\n  var name = elementClass.name || String(elementClass).match(/function ([^(]+)/)[1]; // String match for IE11\n  var dashCase = name.replace(/.[A-Z]/g, function (ref) {\n    var a = ref[0];\n    var b = ref[1];\n\n    return (a + \"-\" + b);\n  }); // NameName -> name-name\n  var customProps = options.props || [];\n  var customEvents = options.customEvents || [];\n  var eventMap = customEvents.reduce(function (map, eventName) {\n    map[eventName] = \"on\" + (eventName.replace(/(^|\\.)./g, function (m) { return m.slice(-1).toUpperCase(); })); // input.filter => onInputFilter\n    return map\n  }, {});\n  var skipProps = customProps.concat('forwardRef', Object.keys(eventMap).map(function (onEventName) { return eventMap[onEventName]; }));\n  var tagName = (dashCase + \"-\" + (options.suffix || 'react')).replace(/\\W+/g, '-').toLowerCase();\n\n  return /*@__PURE__*/(function (superclass) {\n    function anonymous (props) {\n      var this$1 = this;\n\n      superclass.call(this, props);\n      // Register ref prop for accessing custom element https://reactjs.org/docs/refs-and-the-dom.html#callback-refs\n      this.ref = function (el) {\n        if (typeof this$1.props.forwardRef === 'function') { this$1.props.forwardRef(el); }\n        else if (this$1.props.forwardRef) { this$1.props.forwardRef.current = el; }\n        return (this$1.el = el)\n      };\n      // Register event handler on component for each custom event\n      Object.keys(eventMap).forEach(function (eventName) {\n        var onEventName = eventMap[eventName];\n        this$1[eventName] = function (event) {\n          if (this$1.props[onEventName] && closest(event.target, this$1.el.nodeName) === this$1.el) {\n            this$1.props[onEventName](event);\n          }\n        };\n      });\n    }\n\n    if ( superclass ) anonymous.__proto__ = superclass;\n    anonymous.prototype = Object.create( superclass && superclass.prototype );\n    anonymous.prototype.constructor = anonymous;\n\n    anonymous.prototype.componentDidMount = function componentDidMount () {\n      var this$1 = this;\n\n      // Run connectedCallback() after React componentDidMount() to allow React hydration to run first\n      if (!window.customElements.get(tagName)) {\n        window.customElements.define(tagName, elementClass);\n      }\n\n      // Populate properties on custom element\n      customProps.forEach(function (propName) {\n        if (propName in this$1.props) {\n          this$1.el[propName] = this$1.props[propName];\n        }\n      });\n\n      // Register events on custom element\n      customEvents.forEach(function (eventName) {\n        this$1.el.addEventListener(eventName, this$1[eventName]);\n      });\n    };\n\n    anonymous.prototype.componentDidUpdate = function componentDidUpdate (prev) {\n      var this$1 = this;\n\n      // Sync prop changes to custom element\n      customProps.forEach(function (propName) {\n        if (prev[propName] !== this$1.props[propName]) {\n          this$1.el[propName] = this$1.props[propName];\n        }\n      });\n    };\n\n    anonymous.prototype.componentWillUnmount = function componentWillUnmount () {\n      var this$1 = this;\n\n      // Remove event handlers on custom element on unmount\n      customEvents.forEach(function (eventName) {\n        this$1.el.removeEventListener(eventName, this$1[eventName]);\n      });\n    };\n\n    anonymous.prototype.render = function render () {\n      var this$1 = this;\n\n      // Convert React props to CustomElement props https://github.com/facebook/react/issues/12810\n      return React.createElement(tagName, Object.keys(this.props).reduce(function (thisProps, propName) {\n        if (skipProps.indexOf(propName) === -1) { // Do not render customEvents and custom props as attributes\n          if (propName === 'className') { thisProps.class = this$1.props[propName]; } // Fixes className for custom elements\n          else if (this$1.props[propName] === true) { thisProps[propName] = ''; } // Fixes boolean attributes\n          else if (this$1.props[propName] !== false) { thisProps[propName] = this$1.props[propName]; } // Pass only truthy, non-function props\n        }\n        return thisProps\n      }, { ref: this.ref }))\n    };\n\n    return anonymous;\n  }(React.Component))\n}\n\nexport default customElementToReact;\n","import CoreScroll from './core-scroll.js'\nimport { version } from './package.json'\nimport customElementToReact from '@nrk/custom-element-to-react'\n\nexport default customElementToReact(CoreScroll, {\n  customEvents: ['scroll.change', 'scroll.click'],\n  suffix: version\n})\n"],"names":["IS_BROWSER","window","HAS_NAVIGATOR","navigator","test","userAgent","String","platform","global","HTMLElement","addStyle","nodeName","css","key","toLowerCase","min","replace","document","getElementById","head","insertAdjacentHTML","closest","proto","Element","prototype","match","matches","msMatchesSelector","webkitMatchesSelector","el","correspondingUseElement","parentElement","call","dispatchEvent","element","name","detail","ignore","event","CustomEvent","bubbles","cancelable","createEvent","initCustomEvent","result","getUUID","Date","now","toString","Math","random","slice","throttle","callback","ms","timer","args","setTimeout","apply","queryAll","elements","context","nodeType","querySelectorAll","length","DRAG","MOVE","up","y","prop","down","left","x","right","MOVE_SIGNIFICANT","NEEDS_MOUSEDOWN","EVENT_PASSIVE","has","addEventListener","passive","e","requestJumps","matchMedia","requestFrame","requestAnimationFrame","CoreScroll","style","overflow","webkitOverflowScrolling","barWidth","offsetWidth","clientWidth","barHeight","offsetHeight","clientHeight","marginRight","marginBottom","maxHeight","_throttledEvent","handleEvent","bind","_childListObserver","MutationObserver","onDOMchange","observe","childList","subtree","disconnect","removeEventListener","parentNode","defaultPrevented","type","animate","onMousedown","btn","id","target","move","value","scroll","scrollStatus","getScrollStatus","updateButtons","cursor","point","endPoint","parsePoint","uuid","friction","moveX","scrollLeft","moveY","scrollTop","Promise","resolve","round","getAttribute","children","val","setAttribute","max","scrollWidth","scrollHeight","button","preventDefault","pageX","pageY","diffSumX","diffSumY","diffX","diffY","scrollX","scrollY","body","onMousemove","onMouseup","abs","pointerEvents","momentum","self","scrollItems","items","toItem","filter","item","contains","offsetLeft","offsetTop","console","warn","axis","start","bounds","getBoundingClientRect","edge","every","rect","marg","ownerDocument","defaultView","getComputedStyle","parseInt","mutationList","mutation","floor","scrollRight","scrollBottom","forEach","disabled","customElementToReact","elementClass","options","dashCase","ref","a","b","customProps","props","customEvents","eventMap","reduce","map","eventName","m","toUpperCase","skipProps","concat","Object","keys","onEventName","tagName","suffix","superclass","anonymous","this$1","forwardRef","current","__proto__","create","constructor","componentDidMount","customElements","get","define","propName","componentDidUpdate","prev","componentWillUnmount","render","React","createElement","thisProps","indexOf","Component","version"],"mappings":"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"}